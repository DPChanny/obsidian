---
---
## `git restore` 명령어 상세 정리

`git restore`는 Git 2.23 버전부터 도입된 명령어로, **작업 디렉토리(Working Directory)나 스테이징 영역(Staging Area)의 파일을 이전 상태로 되돌리는 데 사용**됩니다. 이 명령어는 기존에 `git checkout`이나 `git reset`이 담당하던 파일 복원 및 스테이징 해제 기능을 **더 명확하고 안전하게 분리**하여 제공합니다.

---

### 1. `git restore`의 역할과 중요성

`git restore`는 파일을 "복원"하거나 "되돌리는" 데 특화된 명령어입니다. 이전에는 `git checkout`이 브랜치 전환과 파일 복원이라는 두 가지 이질적인 역할을 동시에 수행하여 혼란을 야기했습니다. `git restore`의 도입으로 각 명령어의 목적이 명확해져 사용자의 실수를 줄이고 워크플로우를 직관적으로 이해할 수 있게 되었습니다.

- **작업 디렉토리의 변경 사항 취소**: 파일 내용을 마지막 커밋 상태 또는 스테이징된 상태로 되돌려, 현재 작업 중인 내용을 버릴 때 사용합니다.
    
- **스테이징된 변경 사항 해제**: `git add`로 스테이징한 파일을 스테이징되지 않은 상태로 되돌려, 다음 커밋에서 제외하고 싶을 때 사용합니다.
    
- **특정 커밋의 파일 복원**: 과거 특정 커밋 시점의 파일 내용을 현재 작업 디렉토리나 스테이징 영역으로 가져올 수 있습니다.
    

---

### 2. 기본 문법

Bash

```
git restore [<options>] [--source <tree>] [--staged] [--worktree] [--] <pathspec>...
```

- `<pathspec>`: 복원할 파일 또는 디렉토리의 경로를 지정합니다. 여러 경로를 동시에 지정할 수 있습니다.
    
- `--`: 옵션과 경로를 구분할 때 사용합니다. 경로 이름이 옵션처럼 보이는 경우(`-filename.txt` 등)에 유용합니다.
    

---

### 3. 주요 옵션 및 사용 사례

`git restore`는 어떤 영역(작업 디렉토리 vs. 스테이징 영역)의 어떤 상태(현재 HEAD, 특정 커밋)로 되돌릴지에 따라 다양한 옵션을 제공합니다.

#### 3.1. 작업 디렉토리의 변경 사항 버리기

- **명령어**: `git restore <file>` 또는 `git restore --worktree <file>`
    
- **설명**: **작업 디렉토리(Working Directory)에 있는 파일의 변경 사항을 버립니다.** 즉, 해당 파일을 마지막 커밋(HEAD) 상태 또는 스테이징 영역에 있는 상태로 되돌립니다. `--worktree` 옵션은 기본값이므로 생략할 수 있습니다.
    
- **사용 시점**:
    
    - 현재 작업 중인 파일의 내용이 마음에 들지 않거나, 실수로 변경하여 마지막 커밋 상태로 되돌리고 싶을 때.
        
    - 아직 `git add` 하지 않은 변경 사항을 취소할 때.
        
- **예시**:
    
    Bash
    
    ```
    # 'style.css' 파일의 작업 디렉토리 변경 사항을 모두 버리고, 마지막 커밋 상태로 되돌립니다.
    git restore style.css
    
    # 현재 디렉토리의 모든 추적 중인 파일의 작업 디렉토리 변경 사항을 버립니다. (주의: 스테이징되지 않은 변경 사항에만 해당)
    git restore .
    ```
    

#### 3.2. 스테이징된 변경 사항 해제

- **명령어**: `git restore --staged <file>`
    
- **설명**: **스테이징 영역(Staging Area/Index)에 있는 파일의 변경 사항을 스테이징 해제**합니다. 즉, 파일을 `git add` 하기 전 상태로 되돌립니다. **파일 내용은 작업 디렉토리에 그대로 유지**됩니다.
    
- **사용 시점**:
    
    - `git add`로 실수로 파일을 스테이징했을 때.
        
    - 커밋하기 전에 스테이징된 내용 중 일부를 커밋에서 제외하고 싶을 때.
        
- **예시**:
    
    Bash
    
    ```
    # 'index.html' 파일의 스테이징을 해제합니다. 파일 내용은 변경되지 않고 작업 디렉토리에 그대로 남아 있습니다.
    git restore --staged index.html
    
    # 현재 디렉토리의 모든 스테이징된 변경사항을 해제합니다.
    git restore --staged .
    ```
    

#### 3.3. 특정 커밋의 파일 내용 복원

- **명령어**: `git restore --source=<tree-ish> <file>`
    
- **설명**: 특정 커밋(`tree-ish`는 커밋 ID, 브랜치 이름, 태그 이름 등을 의미)의 파일 내용을 **작업 디렉토리로 가져옵니다.**
    
- **사용 시점**:
    
    - 과거 특정 커밋 시점의 파일 내용을 현재 작업 디렉토리로 복원하고 싶을 때.
        
    - 다른 브랜치에 있는 특정 파일의 내용을 현재 작업 디렉토리로 가져오고 싶을 때.
        
- **예시**:
    
    Bash
    
    ```
    # 'main' 브랜치의 'config.js' 파일을 현재 작업 디렉토리로 가져옵니다.
    git restore --source=main config.js
    
    # 특정 커밋 'abcdef1' 시점의 'data.json' 파일을 현재 작업 디렉토리로 가져옵니다.
    git restore --source=abcdef1 data.json
    ```
    

#### 3.4. 특정 커밋의 파일을 스테이징 영역으로 복원

- **명령어**: `git restore --source=<tree-ish> --staged <file>`
    
- **설명**: 특정 커밋(`tree-ish`)의 파일 내용을 **스테이징 영역으로 가져옵니다.** 작업 디렉토리의 파일 내용은 변경되지 않습니다.
    
- **사용 시점**:
    
    - 과거 커밋의 특정 파일 내용을 스테이징하여 새로운 커밋을 만들고 싶을 때.
        
    - 작업 디렉토리에 있는 파일은 그대로 두고, 특정 과거 상태의 파일로 커밋을 준비하고 싶을 때.
        
- **예시**:
    
    Bash
    
    ```
    # 특정 커밋 'abcdef1' 시점의 'data.json' 파일을 스테이징 영역으로 가져옵니다.
    git restore --source=abcdef1 --staged data.json
    ```