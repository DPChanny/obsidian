conda create vs. conda env create: Conda 가상환경 생성 명령어 비교
Conda는 파이썬을 비롯한 여러 프로그래밍 언어의 패키지 및 환경을 관리하는 강력한 도구입니다. 가상환경을 생성하는 두 가지 주요 명령어인 conda create와 conda env create는 유사해 보이지만, 사용 목적과 기능에서 명확한 차이점을 가집니다. 본 문서는 두 명령어의 핵심 기능과 차이점을 세부 옵션과 함께 상세히 설명합니다.
1. conda create
conda create는 새로운 가상환경을 만들고 동시에 필요한 패키지를 직접 명시하여 설치하는 데 사용되는 가장 기본적인 명령어입니다. 주로 간단한 환경을 신속하게 구성하거나, 특정 패키지들을 테스트할 목적으로 새로운 환경을 만들 때 유용합니다.
주요 특징
 * 명령줄 기반의 환경 생성: 환경 이름과 설치할 패키지를 명령줄에 직접 나열하여 환경을 생성합니다.
 * 유연한 패키지 지정: 특정 버전의 파이썬이나 라이브러리를 지정하여 설치할 수 있습니다.
 * 환경 복제: 기존 환경을 그대로 복제하여 새로운 환경을 만들 수 있습니다.
사용법
conda create --name <환경이름> [패키지1] [패키지2=버전] ...

예시
 * 빈 환경 생성
   conda create --name myenv

 * 특정 버전의 파이썬 환경 생성
   conda create -n py39_env python=3.9

 * 여러 패키지를 포함하는 환경 생성
   conda create -n data_science_env python=3.10 numpy pandas matplotlib

 * 기존 환경 복제
   conda create --name new_env --clone old_env

세부 옵션
| 옵션 | 설명 |
|---|---|
| -n, --name <환경이름> | 생성할 가상환경의 이름을 지정합니다. |
| -p, --prefix <경로> | 가상환경을 기본 경로가 아닌 지정된 경로에 생성합니다. |
| <package_spec> | 설치할 패키지를 지정합니다. numpy, pandas=1.4.2와 같이 버전 명시도 가능합니다. |
| --clone <기존환경> | 지정한 기존 환경을 복제하여 새로운 환경을 생성합니다. |
| --file <파일명> | conda list --export로 생성된 spec-file.txt 파일과 같은 명세 파일을 사용하여 환경을 생성합니다. (yml 파일과는 다름) |
| -c, --channel <채널명> | 패키지를 검색할 채널을 지정합니다. (예: conda-forge) |
| --override-channels | 기본 채널을 무시하고 --channel로 지정된 채널만 사용합니다. |
| --no-default-packages | .condarc 파일에 설정된 기본 패키지를 설치하지 않습니다. |
| --strict-channel-priority | 채널 우선순위를 엄격하게 적용하여, 우선순위가 높은 채널에 동일한 이름의 패키지가 있으면 낮은 순위 채널의 패키지는 고려하지 않습니다. |
| -y, --yes | 설치 과정에서 나타나는 모든 확인 프롬프트에 자동으로 'yes'로 응답합니다. |
| --dry-run | 실제로 환경을 생성하거나 패키지를 설치하지 않고, 실행될 작업 내용만 미리 보여줍니다. |
2. conda env create
conda env create는 사전에 정의된 environment.yml 파일로부터 가상환경을 생성하는 데 특화된 명령어입니다. 이 파일에는 환경의 이름, 채널, 그리고 설치될 모든 의존성 패키지 목록이 명시되어 있어, 복잡한 환경을 다른 사람과 공유하거나 다른 시스템에 동일하게 복제하는 데 매우 유용합니다.
주요 특징
 * 파일 기반의 환경 생성: environment.yml 파일을 사용하여 환경을 생성하므로, 환경의 재현성(Reproducibility)과 공유가 용이합니다.
 * 체계적인 의존성 관리: 프로젝트에 필요한 모든 패키지 목록을 파일 하나로 관리할 수 있습니다.
 * pip 패키지 포함 가능: yml 파일 내에 pip 섹션을 추가하여 Conda 채널에 없는 패키지도 함께 설치할 수 있습니다.
사용법
conda env create --file <환경파일.yml>

environment.yml 파일 예시
name: my-project-env
channels:
  - conda-forge
  - defaults
dependencies:
  - python=3.8
  - numpy=1.21.2
  - pandas
  - pip
  - pip:
    - flask==2.0.1
    - scikit-learn

세부 옵션
| 옵션 | 설명 |
|---|---|
| -f, --file <파일명> | 환경을 정의하는 environment.yml 파일의 경로를 지정합니다. (기본값: 현재 디렉토리의 environment.yml) |
| -n, --name <환경이름> | yml 파일에 명시된 이름 대신 새로운 이름을 지정하여 환경을 생성합니다. |
| -p, --prefix <경로> | 가상환경을 기본 경로가 아닌 지정된 경로에 생성합니다. |
| --force | 동일한 이름의 환경이 이미 존재할 경우, 기존 환경을 덮어쓰고 새로 생성합니다. |
| -q, --quiet | 실행 과정의 출력 메시지를 최소화합니다. |
| --json | 출력을 JSON 형식으로 표시합니다. |
| -y, --yes | 설치 과정에서 나타나는 모든 확인 프롬프트에 자동으로 'yes'로 응답합니다. |
3. 주요 차이점 요약
| 구분 | conda create | conda env create |
|---|---|---|
| 주요 목적 | 명령줄에서 직접 패키지를 지정하여 신규 환경 생성 | environment.yml 파일을 기반으로 환경 복원 및 공유 |
| 입력 방식 | --name 옵션과 함께 설치할 패키지 목록을 나열 | --file 옵션으로 .yml 파일을 지정 |
| 의존성 관리 | 주로 일회성, 간단한 환경 구성에 용이 | 체계적이고 재현 가능한 의존성 관리에 매우 효과적 |
| 환경 공유 | conda list --export로 생성한 txt 파일로 가능 | environment.yml 파일을 통해 손쉽게 공유 가능 |
| 사용 시나리오 | - 특정 패키지 조합의 빠른 테스트 - 간단한 프로젝트 환경 구축 - 기존 환경 복제 | - 팀 프로젝트 환경 통일 - 복잡한 의존성을 가진 프로젝트 관리 - 다른 시스템에 동일한 환경 재현 |
결론
 * **conda create**는 "지금 당장, 간단하게" 새로운 환경을 만들어야 할 때 적합합니다. 개발 초기 단계나 간단한 스크립트 실행 환경을 구성할 때 빠르고 편리합니다.
 * **conda env create**는 "체계적으로, 재현 가능하게" 환경을 관리하고 싶을 때 사용해야 합니다. environment.yml 파일을 통해 프로젝트의 의존성을 명확히 문서화하고, 다른 개발자나 다른 시스템과 완벽하게 동일한 환경을 공유할 수 있어 협업 및 배포 환경에서 필수적인 명령어입니다.
따라서 개인적인 소규모 프로젝트나 테스트에는 conda create를, 팀 단위의 프로젝트나 재현성이 중요한 연구 및 개발 환경에서는 conda env create와 environment.yml 파일을 활용하는 것이 바람직합니다.
